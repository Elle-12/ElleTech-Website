{% extends "admin/admin_layout.html" %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='style_admin.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="text-light mb-4 text-center">Manage Orders</h2>

  <!-- Orders Table -->
  <div class="card bg-dark p-3 shadow-sm">
    <table class="table table-dark table-striped table-hover align-middle mb-0">
      <thead class="table-light text-dark">
        <tr>
          <th>Order ID</th>
          <th>User</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Total Price</th>
          <th>Status</th>
          <th>Order Date</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ order.user_id }}</td> <!-- Assuming user_id, but could join to get username -->
          <td>{{ order.product_name }}</td>
          <td>{{ order.quantity }}</td>
          <td>${{ "%.2f"|format(order.total_price) }}</td>
          <td>
            <form method="POST" action="{{ url_for('admin_update_order_status', order_id=order.id) }}" class="d-inline">
              <select name="status" class="form-select form-select-sm bg-transparent text-light border-0">
                <option value="pending" {% if order.status == 'pending' %}selected{% endif %}>Pending</option>
                <option value="shipped" {% if order.status == 'shipped' %}selected{% endif %}>Shipped</option>
                <option value="delivered" {% if order.status == 'delivered' %}selected{% endif %}>Delivered</option>
              </select>
              <button type="submit" class="btn btn-sm btn-warning ms-1">Update</button>
            </form>
          </td>
          <td>{{ order.order_date.strftime('%Y-%m-%d %H:%M') }}</td>
          <td class="text-center">
            <!-- Additional actions if needed -->
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
