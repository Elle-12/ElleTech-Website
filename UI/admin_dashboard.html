{% extends "layout.html" %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
{% endblock %}

{% block content %}
<div class="admin-header text-center mb-5">
  <h2 class="fw-bold text-light">Admin Dashboard</h2>
  <p class="text-secondary">Monitor your products and orders efficiently</p>
</div>

<div class="row">
  <!-- Products Section -->
  <div class="col-md-6 mb-5">
    <div class="admin-card">
      <h4 class="section-title">ðŸ“¦ Product Inventory</h4>
      <table class="table table-dark table-hover align-middle">
        <thead>
          <tr>
            <th>ID</th><th>Name</th><th>Price</th><th>Stock</th><th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for p in products %}
          <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.name }}</td>
            <td>â‚±{{ "%.2f"|format(p.price) }}</td>
            <td>{{ p.stock_qty }}</td>
            <td>
              <a href="{{ url_for('products', id=p.id) }}" class="btn btn-sm btn-warning">Edit</a>
              <a href="{{ url_for('products', id=p.id) }}" class="btn btn-sm btn-danger">Delete</a>
            </td>
          </tr>
          {% else %}
          <tr><td colspan="5" class="text-center text-secondary">No products yet</td></tr>
          {% endfor %}
        </tbody>
      </table>
      <a href="{{ url_for('products') }}" class="btn btn-success w-100 mt-3">âž• Manage Products</a>
    </div>
  </div>

  <!-- Orders Section -->
  <div class="col-md-6 mb-5">
    <div class="admin-card">
      <h4 class="section-title">ðŸ§¾ Customer Orders</h4>
      <table class="table table-dark table-hover align-middle">
        <thead>
          <tr>
            <th>ID</th><th>User</th><th>Product</th><th>Qty</th><th>Total</th><th>Date</th>
          </tr>
        </thead>
        <tbody>
          {% for o in orders %}
          <tr>
            <td>{{ o.id }}</td>
            <td>{{ o.username }}</td>
            <td>{{ o.product_name }}</td>
            <td>{{ o.quantity }}</td>
            <td>â‚±{{ "%.2f"|format(o.total_price) }}</td>
            <td>{{ o.order_date.strftime('%Y-%m-%d') if o.order_date else '' }}</td>
          </tr>
          {% else %}
          <tr><td colspan="6" class="text-center text-secondary">No orders found</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

